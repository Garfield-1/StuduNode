# Makefile常用函数

* GNU make 的函数提供了处理文件名、变量、文本和命令的方法。使用函数我们的 Makefile 可以书写的更加灵活和健壮。



## 1. 函数的调用语法

* GNU make 函数的调用格式类似于变量的引用，以“$”开始表示一个引用。语法格式如下：

  ```makefile
  $(FUNCTION ARGUMENTS)
  # 等价于
  ${FUNCTION ARGUMENTS}
  ```

  * `FUNCTION`是需要调用的函数名，它需要是 make 内嵌的函数名；对于用户自己的函数需要通过 `make` 的`call`函数来间接调用

  * `ARGUMENTS`是函数的参数，参数和函数名之间使用若干个空格或者`[tab]字符`分割，如果存在多个参数时，参数之间使用逗号`,`分开

  * 函数处理参数时，参数中如果存在对其它变量或者函数的引用，首先对这些引用进行展开得到参数的实际内容。而后才对它们进行处理。参数的展开顺序是按照参数的先后顺序来进行的

  * 书写时，函数的参数不能出现逗号“,”和空格。这是因为逗号被作为多个参数的分隔符

    ```makefile
    # 当有逗号或者空格作为函数的参数时，需要把它们赋值给一个变量，在函数的参数中引用这个变量来实现
    
    comma:= , 
    empty:= 
    space:= $(empty) $(empty) 
    foo:= a b c 
    bar:= $(subst $(space),$(comma),$(foo))
    ```




## 2. 文本处理函数

### 2.1 文本处理函数

* 函数名称：函数名称：字符串替换函数—subst

* 函数功能：把字串“TEXT”中的“FROM”字符替换为“TO”

* 返回值：替换后的新字符串

* 函数原型

  ```makefile
  $(subst FROM,TO,TEXT)
  
  # 示例
  
  ```

  